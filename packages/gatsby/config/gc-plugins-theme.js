// theme plugins for gatsby-config.js
const path = require("path");
const {
  siteConfig: { defaultLangCode, enabledLocales, localeConfigPath },
} = require("../src/site-config");
const { i18nextOptions } = require("../src/i18n/i18next-config");

module.exports = [
  `gatsby-plugin-sass`,
  // support .module.css
  {
    resolve: `gatsby-plugin-dts-css-modules`,
    options: {
      banner: `// This file is automatically generated. Do not modify this file manually`,
    },
  },
  {
    // See https://www.gatsbyjs.com/plugins/gatsby-theme-i18n/
    resolve: `gatsby-theme-my-i18n`,
    options: {
      defaultLang: defaultLangCode,
      locales: enabledLocales,
      prefixDefault: false,
      configPath: require.resolve(localeConfigPath),
    },
  },
  {
    resolve: `gatsby-theme-my-i18n-react-i18next`,
    options: {
      // directory for locale files
      locales: path.resolve(__dirname, `../src/i18n`),
      i18nextOptions: {
        ns: i18nextOptions.ns,
      },
    },
  },
];
